import { __decorate } from "tslib";
import { Component, ContentChild, HostBinding, Input, ViewChild, Output, EventEmitter } from '@angular/core';
import { ContextMenuComponent } from '../context-menu/context-menu.component';
var ListItemComponent = /** @class */ (function () {
    function ListItemComponent() {
        this.multiSelect = false;
        this.updateEvent = new EventEmitter();
        this.withContextMenu = false;
    }
    ListItemComponent.prototype.ngOnInit = function () {
        if (!this.id)
            this.id = Math.random()
                .toString(36)
                .substring(2);
    };
    ListItemComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        if (this.contextMenu.nativeElement.firstChild) {
            // wait for next tick to prevent expresionChangedAfterCheck error
            setTimeout(function () {
                _this.withContextMenu = true;
            });
        }
    };
    ListItemComponent.prototype.focusOut = function (e) {
        var leavingParent = !this.contextMenu.nativeElement.contains(e.relatedTarget);
        if (leavingParent) {
            this.toggle(false);
        }
    };
    ListItemComponent.prototype.openContextMenu = function (e) {
        this.toggle();
        e.stopPropagation();
    };
    ListItemComponent.prototype.toggle = function (state) {
        if (!this.childContextMenuComponent)
            return;
        this.childContextMenuComponent.toggle(state);
    };
    ListItemComponent.prototype.checkboxUpdate = function (event) {
        if ((event.checked === 'checked') === this.selected)
            return;
        this.updateEvent.emit(event.checked === 'checked');
    };
    ListItemComponent.prototype.click = function (event) {
        //ignore clicks inside checkbox
        if (event.target !== this.labelElement.nativeElement)
            return;
        this.updateEvent.emit(this.selected);
    };
    __decorate([
        ContentChild(ContextMenuComponent)
    ], ListItemComponent.prototype, "childContextMenuComponent", void 0);
    __decorate([
        ViewChild('contextMenu')
    ], ListItemComponent.prototype, "contextMenu", void 0);
    __decorate([
        ViewChild('labelElement')
    ], ListItemComponent.prototype, "labelElement", void 0);
    __decorate([
        ViewChild('checkboxElement', { static: false })
    ], ListItemComponent.prototype, "checkboxElement", void 0);
    __decorate([
        HostBinding('attr.id'),
        Input()
    ], ListItemComponent.prototype, "id", void 0);
    __decorate([
        Input()
    ], ListItemComponent.prototype, "selected", void 0);
    __decorate([
        Input()
    ], ListItemComponent.prototype, "icon", void 0);
    __decorate([
        Input()
    ], ListItemComponent.prototype, "multiSelect", void 0);
    __decorate([
        Input()
    ], ListItemComponent.prototype, "label", void 0);
    __decorate([
        HostBinding('style.order'),
        Input()
    ], ListItemComponent.prototype, "order", void 0);
    __decorate([
        Output()
    ], ListItemComponent.prototype, "updateEvent", void 0);
    ListItemComponent = __decorate([
        Component({
            selector: 'bmw-list-item',
            template: "<div class=\"wrapper\" [class.selected]=\"selected\" (click)=\"click($event)\">\n  <div\n    class=\"item bmw-component-text\"\n    [class.selected]=\"selected\"\n    [class.with-context-menu]=\"withContextMenu\"\n    [class.multi-select]=\"multiSelect\"\n    #labelElement\n  >\n    <div class=\"separator\" *ngIf=\"multiSelect\"></div>\n    <bmw-checkbox\n      *ngIf=\"multiSelect\"\n      #checkboxElement\n      [checked]=\"selected ? 'checked' : 'unchecked'\"\n      (updateEvent)=\"checkboxUpdate($event)\"\n    ></bmw-checkbox>\n    <i *ngIf=\"icon\" class=\"icon\" [ngClass]=\"icon\"></i>\n    <span *ngIf=\"label\">{{ label }}</span>\n    <div class=\"context-menu\" #contextMenu (focusout)=\"focusOut($event)\" tabindex=\"0\" (click)=\"openContextMenu($event)\">\n      <ng-content select=\"bmw-context-menu\"></ng-content>\n    </div>\n  </div>\n</div>\n",
            styles: [".wrapper .item{position:relative;padding:var(--list__item__padding-vertical) var(--list__item__padding-horizontal);padding-bottom:calc(var(--list__item__padding-vertical) - 1px);border-bottom:1px solid var(--list__item__border-bottom-color);box-sizing:border-box;white-space:wrap;color:var(--list__default__color)}.wrapper .item.with-context-menu{padding-right:calc(var(--list__item__padding-horizontal) + var(--list__item__padding-vertical) + var(--list__icon__height) * .125 + var(--typography__component-text__font-size))}.wrapper .item ::ng-deep label div{height:var(--checkbox__default__height)}.wrapper .item ::ng-deep bmw-checkbox{position:absolute;top:calc((var(--list__item__line-height) - var(--checkbox__default__height))/ 2 + var(--list__item__padding-vertical));left:var(--list__header__padding)}.wrapper .item.selected{background-color:var(--list__item__selected__background-color)}.wrapper .item.multi-select{padding-left:var(--list__header__selectable__padding-left)}.wrapper .item .context-menu{position:absolute;right:0;top:0;box-sizing:border-box;display:inline-block}.wrapper .item .context-menu ::ng-deep bmw-context-menu div.bmwContextMenu{top:100%;right:0}.wrapper .item .context-menu::after{content:'\\e923';font-family:iwp;height:var(--list__icon__height);display:block;padding:var(--list__item__padding-vertical) calc(var(--list__item__padding-vertical) + var(--list__icon__height) * .125)}.wrapper .item .context-menu:empty{display:none}.wrapper .item .context-menu:hover{background-color:var(--list__item__context-menu__opened__background-color)}.wrapper .item .context-menu:focus{outline:0}:host.opened .wrapper .item .context-menu{background-color:var(--list__item__context-menu__opened__background-color)}.wrapper .item .separator{position:absolute;top:0;left:0;height:100%;width:calc(var(--list__icon__height) + 2 * var(--list__header__padding));border-right:1px solid #a3a3a3}.wrapper .item .icon{padding-right:var(--spacing-bmw-xxs)}.wrapper:hover{background-color:var(--list__item__hover__background-color)}:host{display:block;background-color:var(--list-item__default__background-color)}"]
        })
    ], ListItemComponent);
    return ListItemComponent;
}());
export { ListItemComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC1pdGVtLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BibXctZHMvY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbImxpc3QvbGlzdC1pdGVtLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxZQUFZLEVBQ1osV0FBVyxFQUVYLEtBQUssRUFDTCxTQUFTLEVBQ1QsTUFBTSxFQUNOLFlBQVksRUFHYixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSx3Q0FBd0MsQ0FBQztBQVE5RTtJQUFBO1FBaUJFLGdCQUFXLEdBQUcsS0FBSyxDQUFDO1FBT3BCLGdCQUFXLEdBQUcsSUFBSSxZQUFZLEVBQVcsQ0FBQztRQUMxQyxvQkFBZSxHQUFHLEtBQUssQ0FBQztJQThDMUIsQ0FBQztJQTVDQyxvQ0FBUSxHQUFSO1FBQ0UsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ1YsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFO2lCQUNwQixRQUFRLENBQUMsRUFBRSxDQUFDO2lCQUNaLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNwQixDQUFDO0lBRUQsMkNBQWUsR0FBZjtRQUFBLGlCQU9DO1FBTkMsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQyxVQUFVLEVBQUU7WUFDN0MsaUVBQWlFO1lBQ2pFLFVBQVUsQ0FBQztnQkFDVCxLQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztZQUM5QixDQUFDLENBQUMsQ0FBQztTQUNKO0lBQ0gsQ0FBQztJQUNELG9DQUFRLEdBQVIsVUFBUyxDQUFhO1FBQ3BCLElBQU0sYUFBYSxHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUNoRixJQUFJLGFBQWEsRUFBRTtZQUNqQixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQ3BCO0lBQ0gsQ0FBQztJQUVELDJDQUFlLEdBQWYsVUFBZ0IsQ0FBYTtRQUMzQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDZCxDQUFDLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDdEIsQ0FBQztJQUVELGtDQUFNLEdBQU4sVUFBTyxLQUFlO1FBQ3BCLElBQUksQ0FBQyxJQUFJLENBQUMseUJBQXlCO1lBQUUsT0FBTztRQUM1QyxJQUFJLENBQUMseUJBQXlCLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFFRCwwQ0FBYyxHQUFkLFVBQWUsS0FBd0I7UUFDckMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEtBQUssU0FBUyxDQUFDLEtBQUssSUFBSSxDQUFDLFFBQVE7WUFBRSxPQUFPO1FBRTVELElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEtBQUssU0FBUyxDQUFDLENBQUM7SUFDckQsQ0FBQztJQUVELGlDQUFLLEdBQUwsVUFBTSxLQUFpQjtRQUNyQiwrQkFBK0I7UUFDL0IsSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYTtZQUFFLE9BQU87UUFFN0QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7SUFwRUQ7UUFEQyxZQUFZLENBQUMsb0JBQW9CLENBQUM7d0VBQ2E7SUFFaEQ7UUFEQyxTQUFTLENBQUMsYUFBYSxDQUFDOzBEQUNEO0lBRXhCO1FBREMsU0FBUyxDQUFDLGNBQWMsQ0FBQzsyREFDRDtJQUV6QjtRQURDLFNBQVMsQ0FBQyxpQkFBaUIsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsQ0FBQzs4REFDcEI7SUFHNUI7UUFGQyxXQUFXLENBQUMsU0FBUyxDQUFDO1FBQ3RCLEtBQUssRUFBRTtpREFDRztJQUVYO1FBREMsS0FBSyxFQUFFO3VEQUNVO0lBRWxCO1FBREMsS0FBSyxFQUFFO21EQUNLO0lBRWI7UUFEQyxLQUFLLEVBQUU7MERBQ1k7SUFFcEI7UUFEQyxLQUFLLEVBQUU7b0RBQ007SUFHZDtRQUZDLFdBQVcsQ0FBQyxhQUFhLENBQUM7UUFDMUIsS0FBSyxFQUFFO29EQUNNO0lBRWQ7UUFEQyxNQUFNLEVBQUU7MERBQ2lDO0lBeEIvQixpQkFBaUI7UUFMN0IsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLGVBQWU7WUFDekIsODJCQUF5Qzs7U0FFMUMsQ0FBQztPQUNXLGlCQUFpQixDQXVFN0I7SUFBRCx3QkFBQztDQUFBLEFBdkVELElBdUVDO1NBdkVZLGlCQUFpQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgQ29udGVudENoaWxkLFxuICBIb3N0QmluZGluZyxcbiAgRWxlbWVudFJlZixcbiAgSW5wdXQsXG4gIFZpZXdDaGlsZCxcbiAgT3V0cHV0LFxuICBFdmVudEVtaXR0ZXIsXG4gIE9uSW5pdCxcbiAgQWZ0ZXJWaWV3SW5pdFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbnRleHRNZW51Q29tcG9uZW50IH0gZnJvbSAnLi4vY29udGV4dC1tZW51L2NvbnRleHQtbWVudS5jb21wb25lbnQnO1xuaW1wb3J0IHsgQ2hlY2tib3hDb21wb25lbnQgfSBmcm9tICcuLi9jaGVja2JveC9jaGVja2JveC5jb21wb25lbnQnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdibXctbGlzdC1pdGVtJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2xpc3QtaXRlbS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2xpc3QtaXRlbS5jb21wb25lbnQubGVzcyddXG59KVxuZXhwb3J0IGNsYXNzIExpc3RJdGVtQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcbiAgQENvbnRlbnRDaGlsZChDb250ZXh0TWVudUNvbXBvbmVudClcbiAgY2hpbGRDb250ZXh0TWVudUNvbXBvbmVudDogQ29udGV4dE1lbnVDb21wb25lbnQ7XG4gIEBWaWV3Q2hpbGQoJ2NvbnRleHRNZW51JylcbiAgY29udGV4dE1lbnU6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ2xhYmVsRWxlbWVudCcpXG4gIGxhYmVsRWxlbWVudDogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgnY2hlY2tib3hFbGVtZW50JywgeyBzdGF0aWM6IGZhbHNlIH0pXG4gIGNoZWNrYm94RWxlbWVudDogRWxlbWVudFJlZjtcbiAgQEhvc3RCaW5kaW5nKCdhdHRyLmlkJylcbiAgQElucHV0KClcbiAgaWQ6IHN0cmluZztcbiAgQElucHV0KClcbiAgc2VsZWN0ZWQ6IGJvb2xlYW47XG4gIEBJbnB1dCgpXG4gIGljb246IHN0cmluZztcbiAgQElucHV0KClcbiAgbXVsdGlTZWxlY3QgPSBmYWxzZTtcbiAgQElucHV0KClcbiAgbGFiZWw6IHN0cmluZztcbiAgQEhvc3RCaW5kaW5nKCdzdHlsZS5vcmRlcicpXG4gIEBJbnB1dCgpXG4gIG9yZGVyOiBzdHJpbmc7XG4gIEBPdXRwdXQoKVxuICB1cGRhdGVFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcbiAgd2l0aENvbnRleHRNZW51ID0gZmFsc2U7XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKCF0aGlzLmlkKVxuICAgICAgdGhpcy5pZCA9IE1hdGgucmFuZG9tKClcbiAgICAgICAgLnRvU3RyaW5nKDM2KVxuICAgICAgICAuc3Vic3RyaW5nKDIpO1xuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIGlmICh0aGlzLmNvbnRleHRNZW51Lm5hdGl2ZUVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgLy8gd2FpdCBmb3IgbmV4dCB0aWNrIHRvIHByZXZlbnQgZXhwcmVzaW9uQ2hhbmdlZEFmdGVyQ2hlY2sgZXJyb3JcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLndpdGhDb250ZXh0TWVudSA9IHRydWU7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgZm9jdXNPdXQoZTogTW91c2VFdmVudCkge1xuICAgIGNvbnN0IGxlYXZpbmdQYXJlbnQgPSAhdGhpcy5jb250ZXh0TWVudS5uYXRpdmVFbGVtZW50LmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCk7XG4gICAgaWYgKGxlYXZpbmdQYXJlbnQpIHtcbiAgICAgIHRoaXMudG9nZ2xlKGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBvcGVuQ29udGV4dE1lbnUoZTogTW91c2VFdmVudCkge1xuICAgIHRoaXMudG9nZ2xlKCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxuXG4gIHRvZ2dsZShzdGF0ZT86IGJvb2xlYW4pIHtcbiAgICBpZiAoIXRoaXMuY2hpbGRDb250ZXh0TWVudUNvbXBvbmVudCkgcmV0dXJuO1xuICAgIHRoaXMuY2hpbGRDb250ZXh0TWVudUNvbXBvbmVudC50b2dnbGUoc3RhdGUpO1xuICB9XG5cbiAgY2hlY2tib3hVcGRhdGUoZXZlbnQ6IENoZWNrYm94Q29tcG9uZW50KSB7XG4gICAgaWYgKChldmVudC5jaGVja2VkID09PSAnY2hlY2tlZCcpID09PSB0aGlzLnNlbGVjdGVkKSByZXR1cm47XG5cbiAgICB0aGlzLnVwZGF0ZUV2ZW50LmVtaXQoZXZlbnQuY2hlY2tlZCA9PT0gJ2NoZWNrZWQnKTtcbiAgfVxuXG4gIGNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgLy9pZ25vcmUgY2xpY2tzIGluc2lkZSBjaGVja2JveFxuICAgIGlmIChldmVudC50YXJnZXQgIT09IHRoaXMubGFiZWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpIHJldHVybjtcblxuICAgIHRoaXMudXBkYXRlRXZlbnQuZW1pdCh0aGlzLnNlbGVjdGVkKTtcbiAgfVxufVxuIl19