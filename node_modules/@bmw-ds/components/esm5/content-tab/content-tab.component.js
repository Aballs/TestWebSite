import { __decorate, __read, __spread, __values } from "tslib";
import { Component, ContentChildren, ElementRef, EventEmitter, HostBinding, Input, OnDestroy, OnInit, Output, QueryList, HostListener, ViewChild, AfterViewInit } from '@angular/core';
import { ContentTabContentComponent } from './content-tab-content.component';
import { ContentTabLabelComponent } from './content-tab-label.component';
import { Subject } from 'rxjs';
import { filter, take, takeUntil } from 'rxjs/operators';
var ContentTabComponent = /** @class */ (function () {
    function ContentTabComponent(elementRef) {
        this.elementRef = elementRef;
        // if TRUE, then on tab label click a requestSelectionChange event is emitted
        this.guardSelectionChange = false;
        /**
         * expanding content toggle input (default = false)
         */
        this.expandContent = false;
        this.allowSelectionChange$ = new Subject();
        this.unsubscribe$ = new Subject();
        // the selectionChange event contains the value of the "for" input of the selected label
        this.selectionChange = new EventEmitter();
        this.requestSelectionChange = new EventEmitter();
    }
    ContentTabComponent.prototype.onHashChange = function () {
        var urlFragment = window.location.hash.substr(1);
        var labelArray = this.labels.toArray();
        var targetTabIndex = labelArray.findIndex(function (label) { return label.for === urlFragment; });
        if (targetTabIndex !== -1) {
            var tabSearch = labelArray[targetTabIndex];
            if (tabSearch.disabled) {
                tabSearch = null;
                var nextIndexToTest = targetTabIndex === 0 ? labelArray.length - 1 : targetTabIndex - 1;
                while (!tabSearch && nextIndexToTest !== targetTabIndex) {
                    var tabToTest = labelArray[nextIndexToTest];
                    if (!tabToTest.disabled) {
                        tabSearch = tabToTest;
                    }
                    nextIndexToTest = nextIndexToTest === 0 ? labelArray.length - 1 : nextIndexToTest - 1;
                }
            }
            if (tabSearch) {
                this.updateLabelSelection(tabSearch.for);
            }
        }
    };
    ContentTabComponent.prototype.onKeyDown = function (event) {
        var key = event.code || event.keyCode;
        switch (key) {
            case 'ArrowDown':
            case 40:
                this.focusMenuTabOption(2 /* Down */);
                event.stopPropagation();
                event.preventDefault();
                break;
            case 'ArrowUp':
            case 38:
                this.focusMenuTabOption(0 /* Up */);
                event.stopPropagation();
                event.preventDefault();
                break;
            case 'ArrowLeft':
            case 37:
                if (event.target.classList.contains('bmw-component-headline-text')) {
                    this.selectNeighbourContentTab(event.target, 3 /* Left */);
                    event.stopPropagation();
                    event.preventDefault();
                }
                break;
            case 'ArrowRight':
            case 39:
                if (event.target.classList.contains('bmw-component-headline-text')) {
                    this.selectNeighbourContentTab(event.target, 1 /* Right */);
                    event.stopPropagation();
                    event.preventDefault();
                }
                break;
            case 'Enter':
            case 'NumpadEnter':
            case 13:
                if (this.hiddenLabels.classList.contains('opened')) {
                    var focusedTabOptionID_1 = this.getFocusedTabOptionID();
                    if (focusedTabOptionID_1) {
                        if (this.guardSelectionChange) {
                            this.requestLabelSelection(focusedTabOptionID_1);
                        }
                        else {
                            this.updateLabelSelection(focusedTabOptionID_1);
                        }
                        this.labels.find(function (label) { return label.for === focusedTabOptionID_1; }).label.nativeElement.focus();
                        event.stopPropagation();
                        event.preventDefault();
                    }
                }
                break;
            case 'Space':
            case 32:
                if (event.target === this.elementRef.nativeElement.querySelector('.three-dots')) {
                    this.toggleHiddenLabels();
                    event.stopPropagation();
                    event.preventDefault();
                }
                break;
        }
    };
    ContentTabComponent.prototype.ngOnInit = function () {
        var _this = this;
        if (typeof this.justIcon !== 'undefined') {
            this.justIcon = true;
        }
        if (typeof this.withIcon !== 'undefined' && !this.justIcon) {
            this.withIcon = true;
        }
        this.hiddenLabels = this.elementRef.nativeElement.querySelector('.three-dots');
        this.hiddenLabels.addEventListener('focusout', function (e) {
            var leavingParent = !_this.hiddenLabels.contains(e.relatedTarget);
            if (leavingParent) {
                _this.toggleHiddenLabels(false);
            }
        });
        this.setResizeTrigger();
        if (!this.id) {
            this.id = Math.random()
                .toString(36)
                .substring(2);
        }
    };
    ContentTabComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.getArticles();
        this.prepareLabels();
        this.labels.changes.subscribe(function () {
            _this.selected = null;
            _this.prepareLabels();
        });
        this.labels.toArray().forEach(function (label) {
            label.change.subscribe(function () {
                _this.prepareLabels();
            });
        });
        this.hideTabsContentIfAllAreDisabled();
        this.onHashChange();
    };
    ContentTabComponent.prototype.ngOnDestroy = function () {
        this.unsubscribe$.next();
        this.unsubscribe$.complete();
    };
    ContentTabComponent.prototype.getArticles = function () {
        var e_1, _a;
        var wrapperChildren = this.contentTabWrapper.nativeElement.children;
        this.articles = [];
        try {
            for (var wrapperChildren_1 = __values(wrapperChildren), wrapperChildren_1_1 = wrapperChildren_1.next(); !wrapperChildren_1_1.done; wrapperChildren_1_1 = wrapperChildren_1.next()) {
                var childNode = wrapperChildren_1_1.value;
                if (childNode.tagName.toLowerCase() === 'bmw-content-tab-content') {
                    this.articles.push(childNode);
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (wrapperChildren_1_1 && !wrapperChildren_1_1.done && (_a = wrapperChildren_1.return)) _a.call(wrapperChildren_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
    };
    ContentTabComponent.prototype.prepareLabels = function () {
        var _this = this;
        if (!this.labels)
            return;
        var reSelect = false;
        var _loop_1 = function (i) {
            var label = this_1.labels.toArray()[i];
            label.elementRef.nativeElement.dataset.order = i;
            var id = label.for;
            if (label.selected && !label.disabled) {
                this_1.setSelected(id);
            }
            if (label.disabled) {
                label.elementRef.nativeElement.classList.add('disabled');
                reSelect = this_1.selected === label.for;
            }
            else if (label.elementRef.nativeElement.classList.contains('disabled')) {
                label.elementRef.nativeElement.classList.remove('disabled');
            }
            // note that the event will still be handled if it is submitted directly (e.g. $('bmw-content-tab-label.disabled').click())
            label.elementRef.nativeElement.addEventListener('click', function (e) { return _this.onClickLabel(e, id); });
            label.elementRef.nativeElement.classList.add(this_1.justIcon ? 'just-icon' : this_1.withIcon ? 'with-icon' : 'just-text');
        };
        var this_1 = this;
        for (var i = 0; i < this.labels.toArray().length; i++) {
            _loop_1(i);
        }
        var firstEnabledLabel = this.labels.toArray().find(function (label) { return !label.disabled; });
        if (reSelect || (!this.selected && firstEnabledLabel)) {
            this.setSelected(firstEnabledLabel.for);
        }
        setTimeout(function () {
            _this.hideLabelsIfNecessary();
        }, 10);
        // run once again after css variables are replaces in IE
        setTimeout(function () {
            _this.hideLabelsIfNecessary(true);
        }, 500);
    };
    ContentTabComponent.prototype.onClickLabel = function (event, labelId) {
        if (this.guardSelectionChange) {
            this.requestLabelSelection(labelId);
        }
        else {
            this.updateLabelSelection(labelId);
        }
        event.stopPropagation();
    };
    ContentTabComponent.prototype.updateLabelSelection = function (labelId) {
        if (this.selected !== labelId) {
            this.setSelected(labelId);
            this.selectionChange.emit(labelId);
            this.hideLabelsIfNecessary(true);
            this.toggleHiddenLabels(false);
        }
    };
    ContentTabComponent.prototype.requestLabelSelection = function (labelId) {
        var _this = this;
        this.allowSelectionChange$
            .pipe(
        // ensures the subscription completes after the first click event
        take(1), filter(function (allowChange) { return !!allowChange; }), takeUntil(this.unsubscribe$))
            .subscribe(function () { return _this.updateLabelSelection(labelId); });
        var currentSelectedLabel = this.getSelectedLabel();
        this.requestSelectionChange.emit({
            currentSelection: currentSelectedLabel && currentSelectedLabel.for,
            requestedSelection: labelId,
            allowSelectionChange$: this.allowSelectionChange$
        });
    };
    ContentTabComponent.prototype.setResizeTrigger = function () {
        var _this = this;
        var resizeTimer;
        window.addEventListener('resize', function () {
            clearTimeout(resizeTimer);
            var that = _this;
            resizeTimer = setTimeout(function () {
                that.hideLabelsIfNecessary(true);
            }, 10);
        });
    };
    ContentTabComponent.prototype.setSelected = function (selected) {
        this.selected = selected;
        var labelsArray = this.labels.toArray();
        var _loop_2 = function (i) {
            var id = labelsArray[i].for;
            if (selected === id) {
                labelsArray[i].elementRef.nativeElement.classList.add('selected');
                setTimeout(function () {
                    labelsArray[i].selected = true;
                }, 0);
            }
            else {
                labelsArray[i].elementRef.nativeElement.classList.remove('selected');
                labelsArray[i].selected = false;
            }
        };
        for (var i = 0; i < labelsArray.length; i++) {
            _loop_2(i);
        }
        for (var i = 0; i < this.articles.length; i++) {
            var id = this.articles[i].getAttribute('id');
            if (selected === id) {
                this.articles[i].classList.add('selected');
            }
            else {
                this.articles[i].classList.remove('selected');
            }
        }
    };
    ContentTabComponent.prototype.hideLabelsIfNecessary = function (showAllFirst) {
        var labelsDiv = this.elementRef.nativeElement.querySelector('div.labels');
        if (showAllFirst) {
            this.showAllLabels(labelsDiv);
        }
        var height = labelsDiv.offsetHeight;
        var defaultHeight = this.elementRef.nativeElement.querySelector('.labels .border').offsetHeight;
        if (height > defaultHeight) {
            this.createHiddenLabelsMenuElement();
            var hasMoreNonActiveLabels = this.hideLastNonActiveLabel(labelsDiv);
            if (hasMoreNonActiveLabels) {
                this.hideLabelsIfNecessary();
            }
        }
    };
    ContentTabComponent.prototype.hideTabsContentIfAllAreDisabled = function () {
        if (!this.labels.toArray().find(function (label) { return !label.disabled; })) {
            this.tabContents.toArray().forEach(function (tabContent) { return (tabContent.hide = true); });
        }
    };
    ContentTabComponent.prototype.showAllLabels = function (parentElement) {
        if (!this.hiddenLabelsMenu)
            return;
        var length = this.hiddenLabelsMenu.children.length;
        for (var i = 0; i < length; i++) {
            parentElement.prepend(this.hiddenLabelsMenu.children[0]);
        }
        this.hiddenLabels.removeChild(this.hiddenLabelsMenu);
        this.hiddenLabelsMenu = undefined;
        this.sort(parentElement);
    };
    ContentTabComponent.prototype.sort = function (parentElement) {
        var array = parentElement.children;
        array = Array.from(array).sort(function (a, b) {
            return a.dataset.order - b.dataset.order;
        });
        for (var i = 0; i < array.length; i++) {
            parentElement.append(array[i]);
        }
    };
    /**
     * Removes the last non-active label from view and adds it to the three-dots menu
     * @returns boolean indicating if there are more non-active labels in view
     */
    ContentTabComponent.prototype.hideLastNonActiveLabel = function (parentElement) {
        var hasMoreNonActiveLabels = true;
        var tabArray = __spread(parentElement.children).filter(function (child) {
            return !child.classList.contains('border') &&
                !child.classList.contains('three-dots') &&
                !child.classList.contains('selected');
        });
        this.hiddenLabelsMenu.prepend(tabArray.pop());
        if (tabArray.length === 0) {
            hasMoreNonActiveLabels = false;
        }
        return hasMoreNonActiveLabels;
    };
    ContentTabComponent.prototype.createHiddenLabelsMenuElement = function () {
        if (this.hiddenLabelsMenu)
            return;
        this.hiddenLabelsMenu = document.createElement('div');
        this.hiddenLabelsMenu.classList.add('menu');
        this.hiddenLabels.append(this.hiddenLabelsMenu);
    };
    ContentTabComponent.prototype.toggleHiddenLabels = function (state) {
        if (!this.hiddenLabels)
            return;
        if (this.hiddenLabelsMenu) {
            var rectangle = this.hiddenLabels.getBoundingClientRect();
            var position = rectangle.x + rectangle.width - 2;
            this.hiddenLabelsMenu.style['max-width'] = position + 'px';
        }
        var opened = this.hiddenLabels.classList.contains('opened');
        if (state === true) {
            this.hiddenLabels.classList.add('opened');
        }
        else if (state === false) {
            this.hiddenLabels.classList.remove('opened');
        }
        else if (opened) {
            this.hiddenLabels.classList.remove('opened');
        }
        else {
            this.hiddenLabels.classList.add('opened');
        }
    };
    ContentTabComponent.prototype.getSelectedLabel = function () {
        var _this = this;
        return this.labels && this.labels.find(function (label) { return _this.selected === label.for; });
    };
    ContentTabComponent.prototype.selectNeighbourContentTab = function (contentTabLabel, direction) {
        var visibleLabelsArray = Array.prototype.slice.call(this.labelsWrapper.nativeElement.querySelectorAll('bmw-content-tab-label > .bmw-component-headline-text'));
        if (contentTabLabel === this.elementRef.nativeElement.querySelector('.three-dots')) {
            switch (direction) {
                case 3 /* Left */:
                    this.selectAndFocusContentTab(visibleLabelsArray.length - 1);
                    break;
                case 1 /* Right */:
                    this.selectAndFocusContentTab(0);
                    break;
                default:
                    break;
            }
        }
        else {
            var targetedTabLabel_1 = visibleLabelsArray.find(function (tab) { return tab === contentTabLabel; });
            if (visibleLabelsArray.length > 0) {
                if (targetedTabLabel_1) {
                    if (this.hiddenLabelsMenu &&
                        ((targetedTabLabel_1 === visibleLabelsArray[0] && direction === 3 /* Left */) ||
                            (targetedTabLabel_1 === visibleLabelsArray[visibleLabelsArray.length - 1] && direction === 1 /* Right */))) {
                        this.elementRef.nativeElement.querySelector('.three-dots').focus();
                    }
                    else {
                        var beforeChangeTabIndex = visibleLabelsArray.findIndex(function (tabLabel) { return tabLabel === targetedTabLabel_1; });
                        var tabToSelectIndex = this.getNeighbourContentTabLabelIndex(beforeChangeTabIndex, direction);
                        if (tabToSelectIndex >= 0) {
                            this.selectAndFocusContentTab(tabToSelectIndex);
                        }
                        else {
                            throw new Error('Could not find a tab to select');
                        }
                    }
                }
                else {
                    throw new Error('The specified target does not correspond to a tabÂ´s label container');
                }
            }
            else {
                throw new Error('There are no content tab labels defined');
            }
        }
    };
    ContentTabComponent.prototype.selectAndFocusContentTab = function (tabToSelectIndex) {
        var visibleContentTabLabelsArray = Array.prototype.slice.call(this.labelsWrapper.nativeElement.querySelectorAll('bmw-content-tab-label'));
        var tabToSelectID = visibleContentTabLabelsArray[tabToSelectIndex].getAttribute('for');
        this.setSelected(tabToSelectID);
        if (this.guardSelectionChange) {
            this.requestLabelSelection(tabToSelectID);
        }
        else {
            this.updateLabelSelection(tabToSelectID);
        }
        visibleContentTabLabelsArray[tabToSelectIndex].querySelector('.bmw-component-headline-text').focus();
    };
    ContentTabComponent.prototype.getNeighbourContentTabLabelIndex = function (contentTabLabelIndex, direction) {
        var visibleContentTabLabelsArray = Array.prototype.slice.call(this.labelsWrapper.nativeElement.querySelectorAll('bmw-content-tab-label'));
        var neighbourContentTabLabelIndex = -1;
        if (visibleContentTabLabelsArray.find(function (label) { return !label.classList.contains('disabled'); })) {
            switch (direction) {
                case 3 /* Left */:
                    if (contentTabLabelIndex === 0) {
                        neighbourContentTabLabelIndex = visibleContentTabLabelsArray.length - 1;
                    }
                    else {
                        neighbourContentTabLabelIndex = contentTabLabelIndex - 1;
                    }
                    break;
                case 1 /* Right */:
                    if (contentTabLabelIndex === visibleContentTabLabelsArray.length - 1) {
                        neighbourContentTabLabelIndex = 0;
                    }
                    else {
                        neighbourContentTabLabelIndex = contentTabLabelIndex + 1;
                    }
                    break;
                default:
                    break;
            }
            if (visibleContentTabLabelsArray[neighbourContentTabLabelIndex].classList.contains('disabled') ||
                this.isContentTabLabelHidden(visibleContentTabLabelsArray[neighbourContentTabLabelIndex].getAttribute('for'))) {
                neighbourContentTabLabelIndex = this.getNeighbourContentTabLabelIndex(neighbourContentTabLabelIndex, direction);
            }
        }
        else {
            throw new Error('There are no enabled tabs available');
        }
        return neighbourContentTabLabelIndex;
    };
    ContentTabComponent.prototype.getFocusedTabOptionID = function () {
        var focusedTabOption = Array.prototype.slice
            .call(this.hiddenLabelsMenu.querySelectorAll('bmw-content-tab-label'))
            .find(function (tabOption) { return tabOption.classList.contains('focused'); });
        return focusedTabOption ? focusedTabOption.attributes.for.nodeValue : '';
    };
    ContentTabComponent.prototype.isContentTabLabelHidden = function (contentTabID) {
        var isTabLabelHidden = false;
        if (this.hiddenLabelsMenu) {
            var hiddenLabelsIDs = Array.prototype.slice
                .call(this.hiddenLabelsMenu.querySelectorAll('bmw-content-tab-label'))
                .map(function (hiddenLabel) { return hiddenLabel.getAttribute('for'); });
            isTabLabelHidden = hiddenLabelsIDs.indexOf(contentTabID) > -1;
        }
        return isTabLabelHidden;
    };
    ContentTabComponent.prototype.focusMenuTabOption = function (direction) {
        if (this.hiddenLabels.classList.contains('opened')) {
            if (this.hiddenLabelsMenu) {
                var hiddenTabOptions = Array.prototype.slice.call(this.hiddenLabelsMenu.querySelectorAll('bmw-content-tab-label'));
                if (hiddenTabOptions.length &&
                    hiddenTabOptions.some(function (tabOption) { return !tabOption.classList.contains('disabled'); })) {
                    var focusedTabOptionIndex = hiddenTabOptions.findIndex(function (tabOption) {
                        return tabOption.classList.contains('focused');
                    });
                    hiddenTabOptions.forEach(function (tabOption) { return tabOption.classList.remove('focused'); });
                    switch (direction) {
                        case 0 /* Up */:
                            this.setPreviousTabOptionAsFocused(focusedTabOptionIndex);
                            break;
                        case 2 /* Down */:
                            this.setNextTabOptionAsFocused(focusedTabOptionIndex);
                            break;
                        default:
                            break;
                    }
                }
            }
            else {
                throw new Error('There are no options in the three-dots container');
            }
        }
    };
    ContentTabComponent.prototype.setNextTabOptionAsFocused = function (tabOptionIndex) {
        var hiddenTabOptions = Array.prototype.slice.call(this.hiddenLabelsMenu.querySelectorAll('bmw-content-tab-label'));
        if (tabOptionIndex !== -1 && tabOptionIndex !== hiddenTabOptions.length - 1) {
            tabOptionIndex = tabOptionIndex + 1;
        }
        else {
            tabOptionIndex = 0;
        }
        if (hiddenTabOptions[tabOptionIndex].classList.contains('disabled')) {
            this.setNextTabOptionAsFocused(tabOptionIndex);
        }
        else {
            hiddenTabOptions[tabOptionIndex].classList.add('focused');
            hiddenTabOptions[tabOptionIndex].querySelector('label').focus();
        }
    };
    ContentTabComponent.prototype.setPreviousTabOptionAsFocused = function (tabOptionIndex) {
        var hiddenTabOptions = Array.prototype.slice.call(this.hiddenLabelsMenu.querySelectorAll('bmw-content-tab-label'));
        if (tabOptionIndex !== -1 && tabOptionIndex !== 0) {
            tabOptionIndex = tabOptionIndex - 1;
        }
        else {
            tabOptionIndex = hiddenTabOptions.length - 1;
        }
        if (hiddenTabOptions[tabOptionIndex].classList.contains('disabled')) {
            this.setPreviousTabOptionAsFocused(tabOptionIndex);
        }
        else {
            hiddenTabOptions[tabOptionIndex].classList.add('focused');
            hiddenTabOptions[tabOptionIndex].querySelector('label').focus();
        }
    };
    ContentTabComponent.ctorParameters = function () { return [
        { type: ElementRef }
    ]; };
    __decorate([
        ContentChildren(ContentTabLabelComponent)
    ], ContentTabComponent.prototype, "labels", void 0);
    __decorate([
        ContentChildren(ContentTabContentComponent)
    ], ContentTabComponent.prototype, "tabContents", void 0);
    __decorate([
        ViewChild('contentTabWrapper')
    ], ContentTabComponent.prototype, "contentTabWrapper", void 0);
    __decorate([
        ViewChild('labelsWrapper')
    ], ContentTabComponent.prototype, "labelsWrapper", void 0);
    __decorate([
        Input()
    ], ContentTabComponent.prototype, "justIcon", void 0);
    __decorate([
        Input()
    ], ContentTabComponent.prototype, "withIcon", void 0);
    __decorate([
        HostBinding('attr.id'),
        Input()
    ], ContentTabComponent.prototype, "id", void 0);
    __decorate([
        Input()
    ], ContentTabComponent.prototype, "guardSelectionChange", void 0);
    __decorate([
        HostBinding('class.expanding'), Input()
    ], ContentTabComponent.prototype, "expandContent", void 0);
    __decorate([
        Output()
    ], ContentTabComponent.prototype, "selectionChange", void 0);
    __decorate([
        Output()
    ], ContentTabComponent.prototype, "requestSelectionChange", void 0);
    __decorate([
        HostListener('window:hashchange')
    ], ContentTabComponent.prototype, "onHashChange", null);
    __decorate([
        HostListener('keydown', ['$event'])
    ], ContentTabComponent.prototype, "onKeyDown", null);
    ContentTabComponent = __decorate([
        Component({
            selector: 'bmw-content-tab',
            template: "<div [ngClass]=\"{ wrapper: true, 'wrapper--expanding': expandContent }\" #contentTabWrapper>\n  <div [ngClass]=\"{ labels: true, 'labels--expanding': expandContent }\" role=\"tablist\" #labelsWrapper>\n    <ng-content select=\"bmw-content-tab-label\"></ng-content>\n    <div class=\"three-dots\" (click)=\"toggleHiddenLabels()\" tabindex=\"-1\"></div>\n    <div class=\"border\"></div>\n  </div>\n  <ng-content select=\"bmw-content-tab-content\"></ng-content>\n</div>\n",
            styles: [":host{min-height:0;flex-direction:column;display:flex}:host.expanding{height:100%}.three-dots{position:absolute;top:0;right:0;display:inline-block;order:2;box-sizing:content-box;height:calc(var(--content-tabs__label__default__height));z-index:2}.three-dots:empty{display:none}.three-dots:focus{outline:solid 1px;outline-color:var(--color-bmw-highlight);outline-offset:-1px}.three-dots ::ng-deep .menu{display:none;position:absolute;background-color:var(--content-tabs__more-dots__menu__background-color);top:100%;right:0;z-index:var(--content-tabs__z-index-base);border:solid 1px var(--content-tabs__more-dots__menu__border-color)}.three-dots ::ng-deep .menu ::ng-deep bmw-content-tab-label{display:block;max-width:100%}.three-dots ::ng-deep .menu ::ng-deep bmw-content-tab-label.focused{background-color:var(--combo-box__dropdown-item__hover__background-color)}.three-dots.opened ::ng-deep .menu{display:inline-block}.three-dots::after{display:inline-block;line-height:1;font-size:var(--content-tabs__more-dots__menu__font-size);padding:var(--content-tabs__label__icon__padding);padding-bottom:calc(var(--content-tabs__label__icon__padding) - 2px);font-family:iwp;color:var(--content-tabs__labels__default__color);content:'\\ea22';cursor:pointer}.labels{padding-right:var(--content-tabs__label__default__height);position:relative;display:flex;flex:1 0 auto;flex-wrap:wrap}.labels:focus{outline:0}.labels--expanding{flex:0 1 auto}.labels .border{position:absolute;width:100%;left:0;top:0;height:calc(var(--content-tabs__label__default__height) + 2px);box-sizing:border-box;border-bottom:2px solid var(--content-tabs__labels__default__border-color)}.wrapper{min-width:calc(100px + var(--content-tabs__label__default__height));min-height:0;flex-direction:column;display:flex}.wrapper--expanding{flex:1 0 auto;height:100%}"]
        })
    ], ContentTabComponent);
    return ContentTabComponent;
}());
export { ContentTabComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGVudC10YWIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGJtdy1kcy9jb21wb25lbnRzLyIsInNvdXJjZXMiOlsiY29udGVudC10YWIvY29udGVudC10YWIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUNULGVBQWUsRUFDZixVQUFVLEVBQ1YsWUFBWSxFQUNaLFdBQVcsRUFDWCxLQUFLLEVBQ0wsU0FBUyxFQUNULE1BQU0sRUFDTixNQUFNLEVBQ04sU0FBUyxFQUNULFlBQVksRUFDWixTQUFTLEVBQ1QsYUFBYSxFQUNkLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQzdFLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQ3pFLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDL0IsT0FBTyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFvQnpEO0lBNElFLDZCQUFvQixVQUFzQjtRQUF0QixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBckgxQyw2RUFBNkU7UUFFN0UseUJBQW9CLEdBQUcsS0FBSyxDQUFDO1FBRTdCOztXQUVHO1FBQ3NDLGtCQUFhLEdBQUcsS0FBSyxDQUFDO1FBT3ZELDBCQUFxQixHQUFHLElBQUksT0FBTyxFQUFXLENBQUM7UUFDL0MsaUJBQVksR0FBRyxJQUFJLE9BQU8sRUFBUSxDQUFDO1FBRTNDLHdGQUF3RjtRQUV4RixvQkFBZSxHQUF5QixJQUFJLFlBQVksRUFBVSxDQUFDO1FBRW5FLDJCQUFzQixHQUF5QyxJQUFJLFlBQVksRUFBMEIsQ0FBQztJQWdHN0QsQ0FBQztJQTdGOUMsMENBQVksR0FBWjtRQUNFLElBQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0s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QWUsQ0FBQywwQkFBMEIsQ0FBQzs0REFDTztJQUduRDtRQURDLFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQztrRUFDRDtJQUc5QjtRQURDLFNBQVMsQ0FBQyxlQUFlLENBQUM7OERBQ0Q7SUFLMUI7UUFEQyxLQUFLLEVBQUU7eURBQ1U7SUFHbEI7UUFEQyxLQUFLLEVBQUU7eURBQ1U7SUFHbEI7UUFGQyxXQUFXLENBQUMsU0FBUyxDQUFDO1FBQ3RCLEtBQUssRUFBRTttREFDRztJQUdYO1FBREMsS0FBSyxFQUFFO3FFQUNxQjtJQUtZO1FBQXhDLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLEtBQUssRUFBRTs4REFBdUI7SUFZL0Q7UUFEQyxNQUFNLEVBQUU7Z0VBQzBEO0lBRW5FO1FBREMsTUFBTSxFQUFFO3VFQUNpRztJQUcxRztRQURDLFlBQVksQ0FBQyxtQkFBbUIsQ0FBQzsyREEwQmpDO0lBR0Q7UUFEQyxZQUFZLENBQUMsU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUM7d0RBZ0VuQztJQTFJVSxtQkFBbUI7UUFML0IsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLGlCQUFpQjtZQUMzQixrZUFBMkM7O1NBRTVDLENBQUM7T0FDVyxtQkFBbUIsQ0F3bUIvQjtJQUFELDBCQUFDO0NBQUEsQUF4bUJELElBd21CQztTQXhtQlksbUJBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBDb250ZW50Q2hpbGRyZW4sXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgSG9zdEJpbmRpbmcsXG4gIElucHV0LFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgT3V0cHV0LFxuICBRdWVyeUxpc3QsXG4gIEhvc3RMaXN0ZW5lcixcbiAgVmlld0NoaWxkLFxuICBBZnRlclZpZXdJbml0XG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29udGVudFRhYkNvbnRlbnRDb21wb25lbnQgfSBmcm9tICcuL2NvbnRlbnQtdGFiLWNvbnRlbnQuY29tcG9uZW50JztcbmltcG9ydCB7IENvbnRlbnRUYWJMYWJlbENvbXBvbmVudCB9IGZyb20gJy4vY29udGVudC10YWItbGFiZWwuY29tcG9uZW50JztcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGZpbHRlciwgdGFrZSwgdGFrZVVudGlsIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlbGVjdGlvbkNoYW5nZVJlcXVlc3Qge1xuICBjdXJyZW50U2VsZWN0aW9uPzogc3RyaW5nO1xuICByZXF1ZXN0ZWRTZWxlY3Rpb246IHN0cmluZztcbiAgYWxsb3dTZWxlY3Rpb25DaGFuZ2UkOiBTdWJqZWN0PGJvb2xlYW4+O1xufVxuXG5jb25zdCBlbnVtIERpcmVjdGlvbiB7XG4gIFVwLFxuICBSaWdodCxcbiAgRG93bixcbiAgTGVmdFxufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdibXctY29udGVudC10YWInLFxuICB0ZW1wbGF0ZVVybDogJy4vY29udGVudC10YWIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9jb250ZW50LXRhYi5jb21wb25lbnQubGVzcyddXG59KVxuZXhwb3J0IGNsYXNzIENvbnRlbnRUYWJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XG4gIEBDb250ZW50Q2hpbGRyZW4oQ29udGVudFRhYkxhYmVsQ29tcG9uZW50KVxuICBsYWJlbHM6IFF1ZXJ5TGlzdDxDb250ZW50VGFiTGFiZWxDb21wb25lbnQ+O1xuXG4gIEBDb250ZW50Q2hpbGRyZW4oQ29udGVudFRhYkNvbnRlbnRDb21wb25lbnQpXG4gIHRhYkNvbnRlbnRzOiBRdWVyeUxpc3Q8Q29udGVudFRhYkNvbnRlbnRDb21wb25lbnQ+O1xuXG4gIEBWaWV3Q2hpbGQoJ2NvbnRlbnRUYWJXcmFwcGVyJylcbiAgY29udGVudFRhYldyYXBwZXI6IEVsZW1lbnRSZWY7XG5cbiAgQFZpZXdDaGlsZCgnbGFiZWxzV3JhcHBlcicpXG4gIGxhYmVsc1dyYXBwZXI6IEVsZW1lbnRSZWY7XG5cbiAgLy8gaW4gY2FzZSBqdXN0SWNvbiBpcyB0cnVlLCBhbnkgY29udGVudCBvbiBjaGlsZCBsYWJlbCBjb21wb25lbnRzIHdpbGwgYmUgaWdub3JlZFxuICAvLyBqdXN0SWNvbiBhbmQgd2l0aEljb24gYXJlIHN1cHBvc2VkIHRvIGJlIHVzZWQgZXhjbHVzaXZlbHlcbiAgQElucHV0KClcbiAganVzdEljb246IGJvb2xlYW47XG4gIC8vIGluIGNhc2Ugd2l0SWNvbiBpcyBmYWxzZSwgYW55IGljb24gb24gY2hpbGQgbGFiZWwgY29tcG9uZW50cyB3aWxsIGJlIGlnbm9yZWRcbiAgQElucHV0KClcbiAgd2l0aEljb246IGJvb2xlYW47XG4gIEBIb3N0QmluZGluZygnYXR0ci5pZCcpXG4gIEBJbnB1dCgpXG4gIGlkOiBzdHJpbmc7XG4gIC8vIGlmIFRSVUUsIHRoZW4gb24gdGFiIGxhYmVsIGNsaWNrIGEgcmVxdWVzdFNlbGVjdGlvbkNoYW5nZSBldmVudCBpcyBlbWl0dGVkXG4gIEBJbnB1dCgpXG4gIGd1YXJkU2VsZWN0aW9uQ2hhbmdlID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIGV4cGFuZGluZyBjb250ZW50IHRvZ2dsZSBpbnB1dCAoZGVmYXVsdCA9IGZhbHNlKVxuICAgKi9cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5leHBhbmRpbmcnKSBASW5wdXQoKSBleHBhbmRDb250ZW50ID0gZmFsc2U7XG5cbiAgYXJ0aWNsZXM6IGFueVtdO1xuICBzZWxlY3RlZDogc3RyaW5nO1xuICBoaWRkZW5MYWJlbHM6IGFueTtcbiAgaGlkZGVuTGFiZWxzTWVudTogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSBhbGxvd1NlbGVjdGlvbkNoYW5nZSQgPSBuZXcgU3ViamVjdDxib29sZWFuPigpO1xuICBwcml2YXRlIHVuc3Vic2NyaWJlJCA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XG5cbiAgLy8gdGhlIHNlbGVjdGlvbkNoYW5nZSBldmVudCBjb250YWlucyB0aGUgdmFsdWUgb2YgdGhlIFwiZm9yXCIgaW5wdXQgb2YgdGhlIHNlbGVjdGVkIGxhYmVsXG4gIEBPdXRwdXQoKVxuICBzZWxlY3Rpb25DaGFuZ2U6IEV2ZW50RW1pdHRlcjxzdHJpbmc+ID0gbmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCk7XG4gIEBPdXRwdXQoKVxuICByZXF1ZXN0U2VsZWN0aW9uQ2hhbmdlOiBFdmVudEVtaXR0ZXI8U2VsZWN0aW9uQ2hhbmdlUmVxdWVzdD4gPSBuZXcgRXZlbnRFbWl0dGVyPFNlbGVjdGlvbkNoYW5nZVJlcXVlc3Q+KCk7XG5cbiAgQEhvc3RMaXN0ZW5lcignd2luZG93Omhhc2hjaGFuZ2UnKVxuICBvbkhhc2hDaGFuZ2UoKSB7XG4gICAgY29uc3QgdXJsRnJhZ21lbnQgPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHIoMSk7XG4gICAgY29uc3QgbGFiZWxBcnJheSA9IHRoaXMubGFiZWxzLnRvQXJyYXkoKTtcbiAgICBjb25zdCB0YXJnZXRUYWJJbmRleCA9IGxhYmVsQXJyYXkuZmluZEluZGV4KGxhYmVsID0+IGxhYmVsLmZvciA9PT0gdXJsRnJhZ21lbnQpO1xuXG4gICAgaWYgKHRhcmdldFRhYkluZGV4ICE9PSAtMSkge1xuICAgICAgbGV0IHRhYlNlYXJjaCA9IGxhYmVsQXJyYXlbdGFyZ2V0VGFiSW5kZXhdO1xuXG4gICAgICBpZiAodGFiU2VhcmNoLmRpc2FibGVkKSB7XG4gICAgICAgIHRhYlNlYXJjaCA9IG51bGw7XG4gICAgICAgIGxldCBuZXh0SW5kZXhUb1Rlc3QgPSB0YXJnZXRUYWJJbmRleCA9PT0gMCA/IGxhYmVsQXJyYXkubGVuZ3RoIC0gMSA6IHRhcmdldFRhYkluZGV4IC0gMTtcblxuICAgICAgICB3aGlsZSAoIXRhYlNlYXJjaCAmJiBuZXh0SW5kZXhUb1Rlc3QgIT09IHRhcmdldFRhYkluZGV4KSB7XG4gICAgICAgICAgY29uc3QgdGFiVG9UZXN0ID0gbGFiZWxBcnJheVtuZXh0SW5kZXhUb1Rlc3RdO1xuICAgICAgICAgIGlmICghdGFiVG9UZXN0LmRpc2FibGVkKSB7XG4gICAgICAgICAgICB0YWJTZWFyY2ggPSB0YWJUb1Rlc3Q7XG4gICAgICAgICAgfVxuICAgICAgICAgIG5leHRJbmRleFRvVGVzdCA9IG5leHRJbmRleFRvVGVzdCA9PT0gMCA/IGxhYmVsQXJyYXkubGVuZ3RoIC0gMSA6IG5leHRJbmRleFRvVGVzdCAtIDE7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRhYlNlYXJjaCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUxhYmVsU2VsZWN0aW9uKHRhYlNlYXJjaC5mb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEBIb3N0TGlzdGVuZXIoJ2tleWRvd24nLCBbJyRldmVudCddKVxuICBvbktleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBjb25zdCBrZXkgPSBldmVudC5jb2RlIHx8IGV2ZW50LmtleUNvZGU7XG4gICAgc3dpdGNoIChrZXkpIHtcbiAgICAgIGNhc2UgJ0Fycm93RG93bic6XG4gICAgICBjYXNlIDQwOlxuICAgICAgICB0aGlzLmZvY3VzTWVudVRhYk9wdGlvbihEaXJlY3Rpb24uRG93bik7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgY2FzZSAzODpcbiAgICAgICAgdGhpcy5mb2N1c01lbnVUYWJPcHRpb24oRGlyZWN0aW9uLlVwKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdBcnJvd0xlZnQnOlxuICAgICAgY2FzZSAzNzpcbiAgICAgICAgaWYgKChldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5jb250YWlucygnYm13LWNvbXBvbmVudC1oZWFkbGluZS10ZXh0JykpIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdE5laWdoYm91ckNvbnRlbnRUYWIoZXZlbnQudGFyZ2V0LCBEaXJlY3Rpb24uTGVmdCk7XG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICBjYXNlIDM5OlxuICAgICAgICBpZiAoKGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LmNvbnRhaW5zKCdibXctY29tcG9uZW50LWhlYWRsaW5lLXRleHQnKSkge1xuICAgICAgICAgIHRoaXMuc2VsZWN0TmVpZ2hib3VyQ29udGVudFRhYihldmVudC50YXJnZXQsIERpcmVjdGlvbi5SaWdodCk7XG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnRW50ZXInOlxuICAgICAgY2FzZSAnTnVtcGFkRW50ZXInOlxuICAgICAgY2FzZSAxMzpcbiAgICAgICAgaWYgKHRoaXMuaGlkZGVuTGFiZWxzLmNsYXNzTGlzdC5jb250YWlucygnb3BlbmVkJykpIHtcbiAgICAgICAgICBjb25zdCBmb2N1c2VkVGFiT3B0aW9uSUQgPSB0aGlzLmdldEZvY3VzZWRUYWJPcHRpb25JRCgpO1xuICAgICAgICAgIGlmIChmb2N1c2VkVGFiT3B0aW9uSUQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmd1YXJkU2VsZWN0aW9uQ2hhbmdlKSB7XG4gICAgICAgICAgICAgIHRoaXMucmVxdWVzdExhYmVsU2VsZWN0aW9uKGZvY3VzZWRUYWJPcHRpb25JRCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxhYmVsU2VsZWN0aW9uKGZvY3VzZWRUYWJPcHRpb25JRCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMubGFiZWxzLmZpbmQobGFiZWwgPT4gbGFiZWwuZm9yID09PSBmb2N1c2VkVGFiT3B0aW9uSUQpLmxhYmVsLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcblxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnU3BhY2UnOlxuICAgICAgY2FzZSAzMjpcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLnRocmVlLWRvdHMnKSkge1xuICAgICAgICAgIHRoaXMudG9nZ2xlSGlkZGVuTGFiZWxzKCk7XG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYpIHt9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmp1c3RJY29uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5qdXN0SWNvbiA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdGhpcy53aXRoSWNvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgIXRoaXMuanVzdEljb24pIHtcbiAgICAgIHRoaXMud2l0aEljb24gPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuaGlkZGVuTGFiZWxzID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLnRocmVlLWRvdHMnKTtcblxuICAgIHRoaXMuaGlkZGVuTGFiZWxzLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgZSA9PiB7XG4gICAgICBjb25zdCBsZWF2aW5nUGFyZW50ID0gIXRoaXMuaGlkZGVuTGFiZWxzLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCk7XG4gICAgICBpZiAobGVhdmluZ1BhcmVudCkge1xuICAgICAgICB0aGlzLnRvZ2dsZUhpZGRlbkxhYmVscyhmYWxzZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnNldFJlc2l6ZVRyaWdnZXIoKTtcblxuICAgIGlmICghdGhpcy5pZCkge1xuICAgICAgdGhpcy5pZCA9IE1hdGgucmFuZG9tKClcbiAgICAgICAgLnRvU3RyaW5nKDM2KVxuICAgICAgICAuc3Vic3RyaW5nKDIpO1xuICAgIH1cbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICB0aGlzLmdldEFydGljbGVzKCk7XG4gICAgdGhpcy5wcmVwYXJlTGFiZWxzKCk7XG4gICAgdGhpcy5sYWJlbHMuY2hhbmdlcy5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgdGhpcy5zZWxlY3RlZCA9IG51bGw7XG4gICAgICB0aGlzLnByZXBhcmVMYWJlbHMoKTtcbiAgICB9KTtcblxuICAgIHRoaXMubGFiZWxzLnRvQXJyYXkoKS5mb3JFYWNoKGxhYmVsID0+IHtcbiAgICAgIGxhYmVsLmNoYW5nZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICB0aGlzLnByZXBhcmVMYWJlbHMoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5oaWRlVGFic0NvbnRlbnRJZkFsbEFyZURpc2FibGVkKCk7XG5cbiAgICB0aGlzLm9uSGFzaENoYW5nZSgpO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy51bnN1YnNjcmliZSQubmV4dCgpO1xuICAgIHRoaXMudW5zdWJzY3JpYmUkLmNvbXBsZXRlKCk7XG4gIH1cblxuICBnZXRBcnRpY2xlcygpIHtcbiAgICBjb25zdCB3cmFwcGVyQ2hpbGRyZW4gPSB0aGlzLmNvbnRlbnRUYWJXcmFwcGVyLm5hdGl2ZUVsZW1lbnQuY2hpbGRyZW47XG4gICAgdGhpcy5hcnRpY2xlcyA9IFtdO1xuICAgIGZvciAoY29uc3QgY2hpbGROb2RlIG9mIHdyYXBwZXJDaGlsZHJlbikge1xuICAgICAgaWYgKGNoaWxkTm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdibXctY29udGVudC10YWItY29udGVudCcpIHtcbiAgICAgICAgdGhpcy5hcnRpY2xlcy5wdXNoKGNoaWxkTm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJlcGFyZUxhYmVscygpIHtcbiAgICBpZiAoIXRoaXMubGFiZWxzKSByZXR1cm47XG5cbiAgICBsZXQgcmVTZWxlY3QgPSBmYWxzZTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sYWJlbHMudG9BcnJheSgpLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBsYWJlbCA9IHRoaXMubGFiZWxzLnRvQXJyYXkoKVtpXTtcbiAgICAgIGxhYmVsLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5kYXRhc2V0Lm9yZGVyID0gaTtcbiAgICAgIGNvbnN0IGlkID0gbGFiZWwuZm9yO1xuICAgICAgaWYgKGxhYmVsLnNlbGVjdGVkICYmICFsYWJlbC5kaXNhYmxlZCkge1xuICAgICAgICB0aGlzLnNldFNlbGVjdGVkKGlkKTtcbiAgICAgIH1cbiAgICAgIGlmIChsYWJlbC5kaXNhYmxlZCkge1xuICAgICAgICBsYWJlbC5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcbiAgICAgICAgcmVTZWxlY3QgPSB0aGlzLnNlbGVjdGVkID09PSBsYWJlbC5mb3I7XG4gICAgICB9IGVsc2UgaWYgKGxhYmVsLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgbGFiZWwuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG4gICAgICB9XG4gICAgICAvLyBub3RlIHRoYXQgdGhlIGV2ZW50IHdpbGwgc3RpbGwgYmUgaGFuZGxlZCBpZiBpdCBpcyBzdWJtaXR0ZWQgZGlyZWN0bHkgKGUuZy4gJCgnYm13LWNvbnRlbnQtdGFiLWxhYmVsLmRpc2FibGVkJykuY2xpY2soKSlcbiAgICAgIGxhYmVsLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlOiBFdmVudCkgPT4gdGhpcy5vbkNsaWNrTGFiZWwoZSwgaWQpKTtcbiAgICAgIGxhYmVsLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5jbGFzc0xpc3QuYWRkKFxuICAgICAgICB0aGlzLmp1c3RJY29uID8gJ2p1c3QtaWNvbicgOiB0aGlzLndpdGhJY29uID8gJ3dpdGgtaWNvbicgOiAnanVzdC10ZXh0J1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBmaXJzdEVuYWJsZWRMYWJlbCA9IHRoaXMubGFiZWxzLnRvQXJyYXkoKS5maW5kKGxhYmVsID0+ICFsYWJlbC5kaXNhYmxlZCk7XG4gICAgaWYgKHJlU2VsZWN0IHx8ICghdGhpcy5zZWxlY3RlZCAmJiBmaXJzdEVuYWJsZWRMYWJlbCkpIHtcbiAgICAgIHRoaXMuc2V0U2VsZWN0ZWQoZmlyc3RFbmFibGVkTGFiZWwuZm9yKTtcbiAgICB9XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmhpZGVMYWJlbHNJZk5lY2Vzc2FyeSgpO1xuICAgIH0sIDEwKTtcbiAgICAvLyBydW4gb25jZSBhZ2FpbiBhZnRlciBjc3MgdmFyaWFibGVzIGFyZSByZXBsYWNlcyBpbiBJRVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5oaWRlTGFiZWxzSWZOZWNlc3NhcnkodHJ1ZSk7XG4gICAgfSwgNTAwKTtcbiAgfVxuXG4gIG9uQ2xpY2tMYWJlbChldmVudDogRXZlbnQsIGxhYmVsSWQ6IHN0cmluZykge1xuICAgIGlmICh0aGlzLmd1YXJkU2VsZWN0aW9uQ2hhbmdlKSB7XG4gICAgICB0aGlzLnJlcXVlc3RMYWJlbFNlbGVjdGlvbihsYWJlbElkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cGRhdGVMYWJlbFNlbGVjdGlvbihsYWJlbElkKTtcbiAgICB9XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cblxuICB1cGRhdGVMYWJlbFNlbGVjdGlvbihsYWJlbElkOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5zZWxlY3RlZCAhPT0gbGFiZWxJZCkge1xuICAgICAgdGhpcy5zZXRTZWxlY3RlZChsYWJlbElkKTtcbiAgICAgIHRoaXMuc2VsZWN0aW9uQ2hhbmdlLmVtaXQobGFiZWxJZCk7XG4gICAgICB0aGlzLmhpZGVMYWJlbHNJZk5lY2Vzc2FyeSh0cnVlKTtcbiAgICAgIHRoaXMudG9nZ2xlSGlkZGVuTGFiZWxzKGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICByZXF1ZXN0TGFiZWxTZWxlY3Rpb24obGFiZWxJZDogc3RyaW5nKSB7XG4gICAgdGhpcy5hbGxvd1NlbGVjdGlvbkNoYW5nZSRcbiAgICAgIC5waXBlKFxuICAgICAgICAvLyBlbnN1cmVzIHRoZSBzdWJzY3JpcHRpb24gY29tcGxldGVzIGFmdGVyIHRoZSBmaXJzdCBjbGljayBldmVudFxuICAgICAgICB0YWtlKDEpLFxuICAgICAgICBmaWx0ZXIoYWxsb3dDaGFuZ2UgPT4gISFhbGxvd0NoYW5nZSksXG4gICAgICAgIHRha2VVbnRpbCh0aGlzLnVuc3Vic2NyaWJlJClcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy51cGRhdGVMYWJlbFNlbGVjdGlvbihsYWJlbElkKSk7XG5cbiAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRMYWJlbCA9IHRoaXMuZ2V0U2VsZWN0ZWRMYWJlbCgpO1xuICAgIHRoaXMucmVxdWVzdFNlbGVjdGlvbkNoYW5nZS5lbWl0KHtcbiAgICAgIGN1cnJlbnRTZWxlY3Rpb246IGN1cnJlbnRTZWxlY3RlZExhYmVsICYmIGN1cnJlbnRTZWxlY3RlZExhYmVsLmZvcixcbiAgICAgIHJlcXVlc3RlZFNlbGVjdGlvbjogbGFiZWxJZCxcbiAgICAgIGFsbG93U2VsZWN0aW9uQ2hhbmdlJDogdGhpcy5hbGxvd1NlbGVjdGlvbkNoYW5nZSRcbiAgICB9KTtcbiAgfVxuXG4gIHNldFJlc2l6ZVRyaWdnZXIoKSB7XG4gICAgbGV0IHJlc2l6ZVRpbWVyO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dChyZXNpemVUaW1lcik7XG4gICAgICBjb25zdCB0aGF0ID0gdGhpcztcbiAgICAgIHJlc2l6ZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoYXQuaGlkZUxhYmVsc0lmTmVjZXNzYXJ5KHRydWUpO1xuICAgICAgfSwgMTApO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0U2VsZWN0ZWQoc2VsZWN0ZWQ6IHN0cmluZykge1xuICAgIHRoaXMuc2VsZWN0ZWQgPSBzZWxlY3RlZDtcbiAgICBjb25zdCBsYWJlbHNBcnJheSA9IHRoaXMubGFiZWxzLnRvQXJyYXkoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhYmVsc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBpZCA9IGxhYmVsc0FycmF5W2ldLmZvcjtcbiAgICAgIGlmIChzZWxlY3RlZCA9PT0gaWQpIHtcbiAgICAgICAgbGFiZWxzQXJyYXlbaV0uZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGxhYmVsc0FycmF5W2ldLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgfSwgMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsYWJlbHNBcnJheVtpXS5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgbGFiZWxzQXJyYXlbaV0uc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFydGljbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBpZCA9IHRoaXMuYXJ0aWNsZXNbaV0uZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgaWYgKHNlbGVjdGVkID09PSBpZCkge1xuICAgICAgICB0aGlzLmFydGljbGVzW2ldLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmFydGljbGVzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaGlkZUxhYmVsc0lmTmVjZXNzYXJ5KHNob3dBbGxGaXJzdD86IGJvb2xlYW4pIHtcbiAgICBjb25zdCBsYWJlbHNEaXYgPSB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdkaXYubGFiZWxzJyk7XG5cbiAgICBpZiAoc2hvd0FsbEZpcnN0KSB7XG4gICAgICB0aGlzLnNob3dBbGxMYWJlbHMobGFiZWxzRGl2KTtcbiAgICB9XG4gICAgY29uc3QgaGVpZ2h0ID0gbGFiZWxzRGl2Lm9mZnNldEhlaWdodDtcbiAgICBjb25zdCBkZWZhdWx0SGVpZ2h0ID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmxhYmVscyAuYm9yZGVyJykub2Zmc2V0SGVpZ2h0O1xuICAgIGlmIChoZWlnaHQgPiBkZWZhdWx0SGVpZ2h0KSB7XG4gICAgICB0aGlzLmNyZWF0ZUhpZGRlbkxhYmVsc01lbnVFbGVtZW50KCk7XG4gICAgICBjb25zdCBoYXNNb3JlTm9uQWN0aXZlTGFiZWxzID0gdGhpcy5oaWRlTGFzdE5vbkFjdGl2ZUxhYmVsKGxhYmVsc0Rpdik7XG4gICAgICBpZiAoaGFzTW9yZU5vbkFjdGl2ZUxhYmVscykge1xuICAgICAgICB0aGlzLmhpZGVMYWJlbHNJZk5lY2Vzc2FyeSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGhpZGVUYWJzQ29udGVudElmQWxsQXJlRGlzYWJsZWQoKSB7XG4gICAgaWYgKCF0aGlzLmxhYmVscy50b0FycmF5KCkuZmluZChsYWJlbCA9PiAhbGFiZWwuZGlzYWJsZWQpKSB7XG4gICAgICB0aGlzLnRhYkNvbnRlbnRzLnRvQXJyYXkoKS5mb3JFYWNoKHRhYkNvbnRlbnQgPT4gKHRhYkNvbnRlbnQuaGlkZSA9IHRydWUpKTtcbiAgICB9XG4gIH1cblxuICBzaG93QWxsTGFiZWxzKHBhcmVudEVsZW1lbnQpIHtcbiAgICBpZiAoIXRoaXMuaGlkZGVuTGFiZWxzTWVudSkgcmV0dXJuO1xuXG4gICAgY29uc3QgbGVuZ3RoID0gdGhpcy5oaWRkZW5MYWJlbHNNZW51LmNoaWxkcmVuLmxlbmd0aDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHBhcmVudEVsZW1lbnQucHJlcGVuZCh0aGlzLmhpZGRlbkxhYmVsc01lbnUuY2hpbGRyZW5bMF0pO1xuICAgIH1cblxuICAgIHRoaXMuaGlkZGVuTGFiZWxzLnJlbW92ZUNoaWxkKHRoaXMuaGlkZGVuTGFiZWxzTWVudSk7XG4gICAgdGhpcy5oaWRkZW5MYWJlbHNNZW51ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc29ydChwYXJlbnRFbGVtZW50KTtcbiAgfVxuXG4gIHNvcnQocGFyZW50RWxlbWVudCkge1xuICAgIGxldCBhcnJheSA9IHBhcmVudEVsZW1lbnQuY2hpbGRyZW47XG5cbiAgICBhcnJheSA9IEFycmF5LmZyb20oYXJyYXkpLnNvcnQoKGE6IGFueSwgYjogYW55KSA9PiB7XG4gICAgICByZXR1cm4gYS5kYXRhc2V0Lm9yZGVyIC0gYi5kYXRhc2V0Lm9yZGVyO1xuICAgIH0pO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgcGFyZW50RWxlbWVudC5hcHBlbmQoYXJyYXlbaV0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBsYXN0IG5vbi1hY3RpdmUgbGFiZWwgZnJvbSB2aWV3IGFuZCBhZGRzIGl0IHRvIHRoZSB0aHJlZS1kb3RzIG1lbnVcbiAgICogQHJldHVybnMgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIHRoZXJlIGFyZSBtb3JlIG5vbi1hY3RpdmUgbGFiZWxzIGluIHZpZXdcbiAgICovXG4gIGhpZGVMYXN0Tm9uQWN0aXZlTGFiZWwocGFyZW50RWxlbWVudDogYW55KTogYm9vbGVhbiB7XG4gICAgbGV0IGhhc01vcmVOb25BY3RpdmVMYWJlbHMgPSB0cnVlO1xuICAgIGNvbnN0IHRhYkFycmF5ID0gWy4uLnBhcmVudEVsZW1lbnQuY2hpbGRyZW5dLmZpbHRlcihcbiAgICAgIGNoaWxkID0+XG4gICAgICAgICFjaGlsZC5jbGFzc0xpc3QuY29udGFpbnMoJ2JvcmRlcicpICYmXG4gICAgICAgICFjaGlsZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RocmVlLWRvdHMnKSAmJlxuICAgICAgICAhY2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpXG4gICAgKTtcblxuICAgIHRoaXMuaGlkZGVuTGFiZWxzTWVudS5wcmVwZW5kKHRhYkFycmF5LnBvcCgpKTtcblxuICAgIGlmICh0YWJBcnJheS5sZW5ndGggPT09IDApIHtcbiAgICAgIGhhc01vcmVOb25BY3RpdmVMYWJlbHMgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGFzTW9yZU5vbkFjdGl2ZUxhYmVscztcbiAgfVxuXG4gIGNyZWF0ZUhpZGRlbkxhYmVsc01lbnVFbGVtZW50KCkge1xuICAgIGlmICh0aGlzLmhpZGRlbkxhYmVsc01lbnUpIHJldHVybjtcblxuICAgIHRoaXMuaGlkZGVuTGFiZWxzTWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuaGlkZGVuTGFiZWxzTWVudS5jbGFzc0xpc3QuYWRkKCdtZW51Jyk7XG4gICAgdGhpcy5oaWRkZW5MYWJlbHMuYXBwZW5kKHRoaXMuaGlkZGVuTGFiZWxzTWVudSk7XG4gIH1cblxuICB0b2dnbGVIaWRkZW5MYWJlbHMoc3RhdGU/OiBib29sZWFuKSB7XG4gICAgaWYgKCF0aGlzLmhpZGRlbkxhYmVscykgcmV0dXJuO1xuXG4gICAgaWYgKHRoaXMuaGlkZGVuTGFiZWxzTWVudSkge1xuICAgICAgY29uc3QgcmVjdGFuZ2xlID0gdGhpcy5oaWRkZW5MYWJlbHMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IHJlY3RhbmdsZS54ICsgcmVjdGFuZ2xlLndpZHRoIC0gMjtcbiAgICAgIHRoaXMuaGlkZGVuTGFiZWxzTWVudS5zdHlsZVsnbWF4LXdpZHRoJ10gPSBwb3NpdGlvbiArICdweCc7XG4gICAgfVxuXG4gICAgY29uc3Qgb3BlbmVkID0gdGhpcy5oaWRkZW5MYWJlbHMuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuZWQnKTtcblxuICAgIGlmIChzdGF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5oaWRkZW5MYWJlbHMuY2xhc3NMaXN0LmFkZCgnb3BlbmVkJyk7XG4gICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuaGlkZGVuTGFiZWxzLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xuICAgIH0gZWxzZSBpZiAob3BlbmVkKSB7XG4gICAgICB0aGlzLmhpZGRlbkxhYmVscy5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oaWRkZW5MYWJlbHMuY2xhc3NMaXN0LmFkZCgnb3BlbmVkJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRTZWxlY3RlZExhYmVsKCk6IENvbnRlbnRUYWJMYWJlbENvbXBvbmVudCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMubGFiZWxzICYmIHRoaXMubGFiZWxzLmZpbmQobGFiZWwgPT4gdGhpcy5zZWxlY3RlZCA9PT0gbGFiZWwuZm9yKTtcbiAgfVxuXG4gIHB1YmxpYyBzZWxlY3ROZWlnaGJvdXJDb250ZW50VGFiKGNvbnRlbnRUYWJMYWJlbDogRXZlbnRUYXJnZXQsIGRpcmVjdGlvbjogRGlyZWN0aW9uKSB7XG4gICAgY29uc3QgdmlzaWJsZUxhYmVsc0FycmF5OiBIVE1MRWxlbWVudFtdID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoXG4gICAgICB0aGlzLmxhYmVsc1dyYXBwZXIubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdibXctY29udGVudC10YWItbGFiZWwgPiAuYm13LWNvbXBvbmVudC1oZWFkbGluZS10ZXh0JylcbiAgICApO1xuXG4gICAgaWYgKGNvbnRlbnRUYWJMYWJlbCA9PT0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLnRocmVlLWRvdHMnKSkge1xuICAgICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgICAgY2FzZSBEaXJlY3Rpb24uTGVmdDpcbiAgICAgICAgICB0aGlzLnNlbGVjdEFuZEZvY3VzQ29udGVudFRhYih2aXNpYmxlTGFiZWxzQXJyYXkubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgRGlyZWN0aW9uLlJpZ2h0OlxuICAgICAgICAgIHRoaXMuc2VsZWN0QW5kRm9jdXNDb250ZW50VGFiKDApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0YXJnZXRlZFRhYkxhYmVsID0gdmlzaWJsZUxhYmVsc0FycmF5LmZpbmQoKHRhYjogRXZlbnRUYXJnZXQpID0+IHRhYiA9PT0gY29udGVudFRhYkxhYmVsKTtcblxuICAgICAgaWYgKHZpc2libGVMYWJlbHNBcnJheS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmICh0YXJnZXRlZFRhYkxhYmVsKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5oaWRkZW5MYWJlbHNNZW51ICYmXG4gICAgICAgICAgICAoKHRhcmdldGVkVGFiTGFiZWwgPT09IHZpc2libGVMYWJlbHNBcnJheVswXSAmJiBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5MZWZ0KSB8fFxuICAgICAgICAgICAgICAodGFyZ2V0ZWRUYWJMYWJlbCA9PT0gdmlzaWJsZUxhYmVsc0FycmF5W3Zpc2libGVMYWJlbHNBcnJheS5sZW5ndGggLSAxXSAmJiBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5SaWdodCkpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudGhyZWUtZG90cycpLmZvY3VzKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGJlZm9yZUNoYW5nZVRhYkluZGV4ID0gdmlzaWJsZUxhYmVsc0FycmF5LmZpbmRJbmRleChcbiAgICAgICAgICAgICAgKHRhYkxhYmVsOiBIVE1MRWxlbWVudCkgPT4gdGFiTGFiZWwgPT09IHRhcmdldGVkVGFiTGFiZWxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRhYlRvU2VsZWN0SW5kZXggPSB0aGlzLmdldE5laWdoYm91ckNvbnRlbnRUYWJMYWJlbEluZGV4KGJlZm9yZUNoYW5nZVRhYkluZGV4LCBkaXJlY3Rpb24pO1xuXG4gICAgICAgICAgICBpZiAodGFiVG9TZWxlY3RJbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2VsZWN0QW5kRm9jdXNDb250ZW50VGFiKHRhYlRvU2VsZWN0SW5kZXgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZmluZCBhIHRhYiB0byBzZWxlY3QnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc3BlY2lmaWVkIHRhcmdldCBkb2VzIG5vdCBjb3JyZXNwb25kIHRvIGEgdGFiwrRzIGxhYmVsIGNvbnRhaW5lcicpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZXJlIGFyZSBubyBjb250ZW50IHRhYiBsYWJlbHMgZGVmaW5lZCcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2VsZWN0QW5kRm9jdXNDb250ZW50VGFiKHRhYlRvU2VsZWN0SW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IHZpc2libGVDb250ZW50VGFiTGFiZWxzQXJyYXkgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChcbiAgICAgIHRoaXMubGFiZWxzV3JhcHBlci5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Jtdy1jb250ZW50LXRhYi1sYWJlbCcpXG4gICAgKTtcbiAgICBjb25zdCB0YWJUb1NlbGVjdElEID0gdmlzaWJsZUNvbnRlbnRUYWJMYWJlbHNBcnJheVt0YWJUb1NlbGVjdEluZGV4XS5nZXRBdHRyaWJ1dGUoJ2ZvcicpO1xuXG4gICAgdGhpcy5zZXRTZWxlY3RlZCh0YWJUb1NlbGVjdElEKTtcblxuICAgIGlmICh0aGlzLmd1YXJkU2VsZWN0aW9uQ2hhbmdlKSB7XG4gICAgICB0aGlzLnJlcXVlc3RMYWJlbFNlbGVjdGlvbih0YWJUb1NlbGVjdElEKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cGRhdGVMYWJlbFNlbGVjdGlvbih0YWJUb1NlbGVjdElEKTtcbiAgICB9XG5cbiAgICB2aXNpYmxlQ29udGVudFRhYkxhYmVsc0FycmF5W3RhYlRvU2VsZWN0SW5kZXhdLnF1ZXJ5U2VsZWN0b3IoJy5ibXctY29tcG9uZW50LWhlYWRsaW5lLXRleHQnKS5mb2N1cygpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXROZWlnaGJvdXJDb250ZW50VGFiTGFiZWxJbmRleChjb250ZW50VGFiTGFiZWxJbmRleDogbnVtYmVyLCBkaXJlY3Rpb246IERpcmVjdGlvbik6IG51bWJlciB7XG4gICAgY29uc3QgdmlzaWJsZUNvbnRlbnRUYWJMYWJlbHNBcnJheTogSFRNTEVsZW1lbnRbXSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKFxuICAgICAgdGhpcy5sYWJlbHNXcmFwcGVyLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYm13LWNvbnRlbnQtdGFiLWxhYmVsJylcbiAgICApO1xuICAgIGxldCBuZWlnaGJvdXJDb250ZW50VGFiTGFiZWxJbmRleCA9IC0xO1xuXG4gICAgaWYgKHZpc2libGVDb250ZW50VGFiTGFiZWxzQXJyYXkuZmluZChsYWJlbCA9PiAhbGFiZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpKSkge1xuICAgICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgICAgY2FzZSBEaXJlY3Rpb24uTGVmdDpcbiAgICAgICAgICBpZiAoY29udGVudFRhYkxhYmVsSW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIG5laWdoYm91ckNvbnRlbnRUYWJMYWJlbEluZGV4ID0gdmlzaWJsZUNvbnRlbnRUYWJMYWJlbHNBcnJheS5sZW5ndGggLSAxO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZWlnaGJvdXJDb250ZW50VGFiTGFiZWxJbmRleCA9IGNvbnRlbnRUYWJMYWJlbEluZGV4IC0gMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBEaXJlY3Rpb24uUmlnaHQ6XG4gICAgICAgICAgaWYgKGNvbnRlbnRUYWJMYWJlbEluZGV4ID09PSB2aXNpYmxlQ29udGVudFRhYkxhYmVsc0FycmF5Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIG5laWdoYm91ckNvbnRlbnRUYWJMYWJlbEluZGV4ID0gMDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmVpZ2hib3VyQ29udGVudFRhYkxhYmVsSW5kZXggPSBjb250ZW50VGFiTGFiZWxJbmRleCArIDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIHZpc2libGVDb250ZW50VGFiTGFiZWxzQXJyYXlbbmVpZ2hib3VyQ29udGVudFRhYkxhYmVsSW5kZXhdLmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSB8fFxuICAgICAgICB0aGlzLmlzQ29udGVudFRhYkxhYmVsSGlkZGVuKHZpc2libGVDb250ZW50VGFiTGFiZWxzQXJyYXlbbmVpZ2hib3VyQ29udGVudFRhYkxhYmVsSW5kZXhdLmdldEF0dHJpYnV0ZSgnZm9yJykpXG4gICAgICApIHtcbiAgICAgICAgbmVpZ2hib3VyQ29udGVudFRhYkxhYmVsSW5kZXggPSB0aGlzLmdldE5laWdoYm91ckNvbnRlbnRUYWJMYWJlbEluZGV4KG5laWdoYm91ckNvbnRlbnRUYWJMYWJlbEluZGV4LCBkaXJlY3Rpb24pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZXJlIGFyZSBubyBlbmFibGVkIHRhYnMgYXZhaWxhYmxlJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5laWdoYm91ckNvbnRlbnRUYWJMYWJlbEluZGV4O1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRGb2N1c2VkVGFiT3B0aW9uSUQoKTogc3RyaW5nIHtcbiAgICBjb25zdCBmb2N1c2VkVGFiT3B0aW9uID0gQXJyYXkucHJvdG90eXBlLnNsaWNlXG4gICAgICAuY2FsbCh0aGlzLmhpZGRlbkxhYmVsc01lbnUucXVlcnlTZWxlY3RvckFsbCgnYm13LWNvbnRlbnQtdGFiLWxhYmVsJykpXG4gICAgICAuZmluZCgodGFiT3B0aW9uOiBIVE1MRWxlbWVudCkgPT4gdGFiT3B0aW9uLmNsYXNzTGlzdC5jb250YWlucygnZm9jdXNlZCcpKTtcblxuICAgIHJldHVybiBmb2N1c2VkVGFiT3B0aW9uID8gZm9jdXNlZFRhYk9wdGlvbi5hdHRyaWJ1dGVzLmZvci5ub2RlVmFsdWUgOiAnJztcbiAgfVxuXG4gIHByaXZhdGUgaXNDb250ZW50VGFiTGFiZWxIaWRkZW4oY29udGVudFRhYklEOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBsZXQgaXNUYWJMYWJlbEhpZGRlbiA9IGZhbHNlO1xuICAgIGlmICh0aGlzLmhpZGRlbkxhYmVsc01lbnUpIHtcbiAgICAgIGNvbnN0IGhpZGRlbkxhYmVsc0lEczogc3RyaW5nW10gPSBBcnJheS5wcm90b3R5cGUuc2xpY2VcbiAgICAgICAgLmNhbGwodGhpcy5oaWRkZW5MYWJlbHNNZW51LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Jtdy1jb250ZW50LXRhYi1sYWJlbCcpKVxuICAgICAgICAubWFwKChoaWRkZW5MYWJlbDogSFRNTEVsZW1lbnQpID0+IGhpZGRlbkxhYmVsLmdldEF0dHJpYnV0ZSgnZm9yJykpO1xuXG4gICAgICBpc1RhYkxhYmVsSGlkZGVuID0gaGlkZGVuTGFiZWxzSURzLmluZGV4T2YoY29udGVudFRhYklEKSA+IC0xO1xuICAgIH1cblxuICAgIHJldHVybiBpc1RhYkxhYmVsSGlkZGVuO1xuICB9XG5cbiAgcHJpdmF0ZSBmb2N1c01lbnVUYWJPcHRpb24oZGlyZWN0aW9uOiBEaXJlY3Rpb24pIHtcbiAgICBpZiAodGhpcy5oaWRkZW5MYWJlbHMuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuZWQnKSkge1xuICAgICAgaWYgKHRoaXMuaGlkZGVuTGFiZWxzTWVudSkge1xuICAgICAgICBjb25zdCBoaWRkZW5UYWJPcHRpb25zID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoXG4gICAgICAgICAgdGhpcy5oaWRkZW5MYWJlbHNNZW51LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Jtdy1jb250ZW50LXRhYi1sYWJlbCcpXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGhpZGRlblRhYk9wdGlvbnMubGVuZ3RoICYmXG4gICAgICAgICAgaGlkZGVuVGFiT3B0aW9ucy5zb21lKCh0YWJPcHRpb246IEhUTUxFbGVtZW50KSA9PiAhdGFiT3B0aW9uLmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgZm9jdXNlZFRhYk9wdGlvbkluZGV4OiBudW1iZXIgPSBoaWRkZW5UYWJPcHRpb25zLmZpbmRJbmRleCgodGFiT3B0aW9uOiBIVE1MRWxlbWVudCkgPT5cbiAgICAgICAgICAgIHRhYk9wdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2ZvY3VzZWQnKVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBoaWRkZW5UYWJPcHRpb25zLmZvckVhY2goKHRhYk9wdGlvbjogSFRNTEVsZW1lbnQpID0+IHRhYk9wdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdmb2N1c2VkJykpO1xuXG4gICAgICAgICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLlVwOlxuICAgICAgICAgICAgICB0aGlzLnNldFByZXZpb3VzVGFiT3B0aW9uQXNGb2N1c2VkKGZvY3VzZWRUYWJPcHRpb25JbmRleCk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uRG93bjpcbiAgICAgICAgICAgICAgdGhpcy5zZXROZXh0VGFiT3B0aW9uQXNGb2N1c2VkKGZvY3VzZWRUYWJPcHRpb25JbmRleCk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZXJlIGFyZSBubyBvcHRpb25zIGluIHRoZSB0aHJlZS1kb3RzIGNvbnRhaW5lcicpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2V0TmV4dFRhYk9wdGlvbkFzRm9jdXNlZCh0YWJPcHRpb25JbmRleDogbnVtYmVyKSB7XG4gICAgY29uc3QgaGlkZGVuVGFiT3B0aW9ucyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKFxuICAgICAgdGhpcy5oaWRkZW5MYWJlbHNNZW51LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Jtdy1jb250ZW50LXRhYi1sYWJlbCcpXG4gICAgKTtcblxuICAgIGlmICh0YWJPcHRpb25JbmRleCAhPT0gLTEgJiYgdGFiT3B0aW9uSW5kZXggIT09IGhpZGRlblRhYk9wdGlvbnMubGVuZ3RoIC0gMSkge1xuICAgICAgdGFiT3B0aW9uSW5kZXggPSB0YWJPcHRpb25JbmRleCArIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhYk9wdGlvbkluZGV4ID0gMDtcbiAgICB9XG5cbiAgICBpZiAoaGlkZGVuVGFiT3B0aW9uc1t0YWJPcHRpb25JbmRleF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpKSB7XG4gICAgICB0aGlzLnNldE5leHRUYWJPcHRpb25Bc0ZvY3VzZWQodGFiT3B0aW9uSW5kZXgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBoaWRkZW5UYWJPcHRpb25zW3RhYk9wdGlvbkluZGV4XS5jbGFzc0xpc3QuYWRkKCdmb2N1c2VkJyk7XG4gICAgICBoaWRkZW5UYWJPcHRpb25zW3RhYk9wdGlvbkluZGV4XS5xdWVyeVNlbGVjdG9yKCdsYWJlbCcpLmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXRQcmV2aW91c1RhYk9wdGlvbkFzRm9jdXNlZCh0YWJPcHRpb25JbmRleDogbnVtYmVyKSB7XG4gICAgY29uc3QgaGlkZGVuVGFiT3B0aW9ucyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKFxuICAgICAgdGhpcy5oaWRkZW5MYWJlbHNNZW51LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Jtdy1jb250ZW50LXRhYi1sYWJlbCcpXG4gICAgKTtcblxuICAgIGlmICh0YWJPcHRpb25JbmRleCAhPT0gLTEgJiYgdGFiT3B0aW9uSW5kZXggIT09IDApIHtcbiAgICAgIHRhYk9wdGlvbkluZGV4ID0gdGFiT3B0aW9uSW5kZXggLSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YWJPcHRpb25JbmRleCA9IGhpZGRlblRhYk9wdGlvbnMubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICBpZiAoaGlkZGVuVGFiT3B0aW9uc1t0YWJPcHRpb25JbmRleF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpKSB7XG4gICAgICB0aGlzLnNldFByZXZpb3VzVGFiT3B0aW9uQXNGb2N1c2VkKHRhYk9wdGlvbkluZGV4KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGlkZGVuVGFiT3B0aW9uc1t0YWJPcHRpb25JbmRleF0uY2xhc3NMaXN0LmFkZCgnZm9jdXNlZCcpO1xuICAgICAgaGlkZGVuVGFiT3B0aW9uc1t0YWJPcHRpb25JbmRleF0ucXVlcnlTZWxlY3RvcignbGFiZWwnKS5mb2N1cygpO1xuICAgIH1cbiAgfVxufVxuIl19